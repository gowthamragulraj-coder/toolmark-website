<!DOCTYPE html>
<html>
<head>
  <title>Tool Mark Identification</title>
  <style>
    body { font-family: Arial, sans-serif; padding: 20px; }
    h1, h2 { text-align: center; }
    #gallery img { width: 150px; margin: 5px; cursor: pointer; border: 2px solid #ccc; }
    #gallery img.selected { border: 4px solid green; }
    #compare { display: flex; justify-content: center; gap: 20px; margin-top: 20px; }
    #compare img { width: 300px; border: 2px solid #000; }
  </style>
</head>
<body>
  <h1>Tool Mark Identification System</h1>

  <h2>Upload Tool Mark Images</h2>
  <input type="file" id="fileInput" multiple accept="image/*">

  <h2>Uploaded Tool Marks</h2>
  <div id="gallery"></div>

  <h2>Compare Selected Tool Marks</h2>
  <div id="compare">
    <img id="img1" src="" alt="Image 1">
    <img id="img2" src="" alt="Image 2">
  </div>

  <script>
    const fileInput = document.getElementById('fileInput');
    const gallery = document.getElementById('gallery');
    const img1 = document.getElementById('img1');
    const img2 = document.getElementById('img2');

    let selectedImages = [];

    fileInput.addEventListener('change', () => {
      gallery.innerHTML = ''; // clear previous
      selectedImages = [];
      img1.src = '';
      img2.src = '';

      const files = fileInput.files;
      for (let i = 0; i < files.length; i++) {
        const reader = new FileReader();
        reader.onload = function(e) {
          const image = document.createElement('img');
          image.src = e.target.result;

          // Click to select for comparison
          image.addEventListener('click', () => {
            if (!selectedImages.includes(image.src)) {
              if (selectedImages.length < 2) {
                selectedImages.push(image.src);
                image.classList.add('selected');
              } else {
                alert('You can only select 2 images for comparison');
              }
            } else {
              selectedImages = selectedImages.filter(src => src !== image.src);
              image.classList.remove('selected');
            }

            // Show selected images side-by-side
            img1.src = selectedImages[0] || '';
            img2.src = selectedImages[1] || '';
          });

          gallery.appendChild(image);
        };
        reader.readAsDataURL(files[i]);
      }
    });
  </script>
</body>
</html>
